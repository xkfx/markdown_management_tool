<p>需求：</p>
<p>实现用户名和密码存入数据库。</p>
<p>思路：</p>
<p>1、连接数据表用静态加载块</p>
<p>2、crud写成4个静态方法</p>
<p>具体流程：</p>
<p>from:https://www.tutorialspoint.com/jdbc/jdbc-sample-code.htm</p>
<p>参考：</p>
<p>1、jdbc：http://blog.csdn.net/williamchew/article/details/51951551</p>
<p>2、jdbc：http://www.cnblogs.com/wuyuegb2312/p/3872607.html</p>
<p>3、mysql:<a href="http://bbs.csdn.net/topics/190058796" target="_blank"><span class="title text_overflow">Mysql数据库中怎样快速查询符合条件的记录是否存在</span></a></p>
<p><span class="title text_overflow">4、select 1 的含义：https://zhidao.baidu.com/question/940814605173482052.html</span></p>
<p>5、判断resultset为空：http://bbs.csdn.net/topics/60427882</p>
<p>&nbsp;<img src="http://images2015.cnblogs.com/blog/1042431/201705/1042431-20170504175550867-2078936141.png" alt="" width="385" height="311" /></p>
<p>代码：</p>
<p><span style="color: #ff0000;"><strong>jdbc</strong></span></p>
<p>1、intellij idea添加jar包，在Project Structure的dependencies里添加。</p>
<p><img src="http://images2015.cnblogs.com/blog/1042431/201705/1042431-20170504180418523-327653208.png" alt="" width="568" height="48" /></p>
<p>&nbsp;成功添加后external libraries是这样子的：</p>
<p><img src="http://images2015.cnblogs.com/blog/1042431/201705/1042431-20170504180523164-1357497439.png" alt="" width="255" height="104" /></p>
<p>2、写代码前的准备--创建数据表</p>
<p><img src="http://images2015.cnblogs.com/blog/1042431/201705/1042431-20170504181234523-221757039.png" alt="" width="515" height="56" /></p>
<p>3、尝试</p>
<div class="cnblogs_code">
<pre><span style="color: #008000;">//</span><span style="color: #008000;"> import org.gjt.mm.mysql.*; 测试package是否正确导入</span>
<span style="color: #0000ff;">import</span> java.sql.*<span style="color: #000000;">;

</span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> Database {
}</span></pre>
</div>
<div class="cnblogs_code">
<pre><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> main(String[] args) {
        </span><span style="color: #0000ff;">try</span><span style="color: #000000;"> {
            Class.forName(</span>"org.gjt.mm.mysql.Driver"<span style="color: #000000;">);
        } </span><span style="color: #0000ff;">catch</span><span style="color: #000000;"> (ClassNotFoundException e) {
            e.printStackTrace();
        }
    }</span></pre>
</div>
<p>Class是一个类，forName是这个类的一个静态方法。传入的string必须是某个类的全名，返回值为该类的对象。这里用这种方式加载驱动Driver的静态语句块。（为什么不可以用new Driver();的方式加载呢？）<a id="cb_post_title_url" class="postTitle2" href="http://www.cnblogs.com/kunpengit/archive/2011/12/13/2285933.html">各种数据库对应的jar包、驱动类名和URL格式</a>&nbsp;补充：静态的两个特点：静态的只会在说明类的时候执行一次；不论创建多少对象静态的只有一份。</p>
<div class="cnblogs_code">
<pre>    <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> main(String[] args) {
        </span><span style="color: #0000ff;">try</span><span style="color: #000000;"> {
            Class.forName(JDBC_DRIVER);

            Connection conn </span>= DriverManager.getConnection(DB_URL, USER, PASS); <span style="color: #008000;">//</span><span style="color: #008000;"> 可以理解为IO中的定位，传入URL可以推测getConnection里一定包装了关于Socket的操作</span>
<span style="color: #000000;">            
        } </span><span style="color: #0000ff;">catch</span><span style="color: #000000;"> (Exception e) {
            e.printStackTrace();
        }
    }</span></pre>
</div>
<p>可以观察到，不论是Driver或是Connection对象，都不是通过new来创建的。</p>
<div class="cnblogs_code">
<pre><span style="color: #008000;">//</span><span style="color: #008000;"> JDBC驱动名称和数据库位置</span>
    <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">final</span> String JDBC_DRIVER = "org.gjt.mm.mysql.Driver"<span style="color: #000000;">;
    </span><span style="color: #0000ff;">static</span> <span style="color: #0000ff;">final</span> String DB_URL = "jdbc:mysql://localhost:3306/qq"<span style="color: #000000;">;

    </span><span style="color: #008000;">//</span><span style="color: #008000;">  用户名和密码</span>
    <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">final</span> String USER = "root"<span style="color: #000000;">;
    </span><span style="color: #0000ff;">static</span> <span style="color: #0000ff;">final</span> String PASS = "pass"<span style="color: #000000;">;

    </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span> main(String[] args) <span style="color: #0000ff;">throws</span><span style="color: #000000;"> SQLException {
        Connection conn </span>= <span style="color: #0000ff;">null</span><span style="color: #000000;">;
        Statement stmt </span>= <span style="color: #0000ff;">null</span><span style="color: #000000;">;
        </span><span style="color: #0000ff;">try</span><span style="color: #000000;"> {
            Class.forName(JDBC_DRIVER);

            conn </span>= DriverManager.getConnection(DB_URL, USER, PASS); <span style="color: #008000;">//</span><span style="color: #008000;"> 可以理解为IO中的定位，传入URL可以推测getConnection里一定包装了关于Socket的操作</span>
<span style="color: #000000;">
            stmt </span>=<span style="color: #000000;"> conn.createStatement();
            String sql </span>= "insert user(username, password)values('red2', 'a123456')"<span style="color: #000000;">;
            System.out.println(stmt.executeUpdate(sql));

        } </span><span style="color: #0000ff;">catch</span><span style="color: #000000;"> (Exception e) {
            e.printStackTrace();
        } </span><span style="color: #0000ff;">finally</span><span style="color: #000000;"> {
            </span><span style="color: #0000ff;">try</span><span style="color: #000000;"> {
                stmt.close();
            } </span><span style="color: #0000ff;">catch</span><span style="color: #000000;"> (SQLException e) {
                e.printStackTrace();
            }
            </span><span style="color: #0000ff;">try</span><span style="color: #000000;"> {
                conn.close();
            } </span><span style="color: #0000ff;">catch</span><span style="color: #000000;"> (SQLException e) {
                e.printStackTrace();
            }
        }</span></pre>
</div>
<p>&nbsp;升级update部分：</p>
<div class="cnblogs_code">
<pre>prep = conn.prepareStatement("insert user(username, password) values(? , ?)"<span style="color: #000000;">);
            prep.setString(</span>1, "hi"<span style="color: #000000;">);
            prep.setString(</span>2, "ss"<span style="color: #000000;">);
            System.out.println(prep.executeUpdate());</span></pre>
</div>
<p>&nbsp;</p>
<p><strong><span style="color: #ff0000;">融入主代码</span></strong></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff;">package</span><span style="color: #000000;"> com.xkfx.qq.tools.serverOnly;

</span><span style="color: #0000ff;">import</span><span style="color: #000000;"> com.xkfx.qq.tools.transmit.User;
</span><span style="color: #0000ff;">import</span> java.sql.*<span style="color: #000000;">;

</span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> Database {
    </span><span style="color: #0000ff;">private</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">final</span> String JDBC_DRIVER = "org.gjt.mm.mysql.Driver"<span style="color: #000000;">;
    </span><span style="color: #0000ff;">private</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">final</span> String DB_URL = "jdbc:mysql://localhost:3306/qq"<span style="color: #000000;">;

    </span><span style="color: #0000ff;">private</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">final</span> String USER = "root"<span style="color: #000000;">;
    </span><span style="color: #0000ff;">private</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">final</span> String PASS = "pass"<span style="color: #000000;">;

    </span><span style="color: #0000ff;">private</span> <span style="color: #0000ff;">static</span> Connection conn = <span style="color: #0000ff;">null</span><span style="color: #000000;">;

    </span><span style="color: #0000ff;">static</span><span style="color: #000000;"> {
        </span><span style="color: #0000ff;">try</span><span style="color: #000000;"> {
            Class.forName(JDBC_DRIVER);
            conn </span>=<span style="color: #000000;"> DriverManager.getConnection(DB_URL, USER, PASS);
        } </span><span style="color: #0000ff;">catch</span><span style="color: #000000;"> (ClassNotFoundException e) {
            e.printStackTrace();
        } </span><span style="color: #0000ff;">catch</span><span style="color: #000000;"> (SQLException e) {
            e.printStackTrace();
        }
    }

    </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> close() {
        </span><span style="color: #0000ff;">try</span><span style="color: #000000;"> {
            conn.close();
        } </span><span style="color: #0000ff;">catch</span><span style="color: #000000;"> (SQLException e) {
            e.printStackTrace();
        }
    }

    </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> saveUser(User user) {
        PreparedStatement prep </span>= <span style="color: #0000ff;">null</span><span style="color: #000000;">;
        </span><span style="color: #0000ff;">try</span><span style="color: #000000;"> {
            prep </span>= conn.prepareStatement("INSERT USER(username, password) VALUES(? , ?)"<span style="color: #000000;">);
            prep.setString(</span>1<span style="color: #000000;">, user.getUsername());
            prep.setString(</span>2<span style="color: #000000;">, user.getPassword());
            prep.executeUpdate();
        } </span><span style="color: #0000ff;">catch</span><span style="color: #000000;"> (SQLException e) {
            e.printStackTrace();
        } </span><span style="color: #0000ff;">finally</span><span style="color: #000000;"> {
            </span><span style="color: #0000ff;">try</span><span style="color: #000000;"> {
                prep.close();
            } </span><span style="color: #0000ff;">catch</span><span style="color: #000000;"> (SQLException e) {
                e.printStackTrace();
            }
        }
    }

    </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span><span style="color: #000000;"> User get(String username) {
        </span><span style="color: #0000ff;">return</span> <span style="color: #0000ff;">null</span><span style="color: #000000;">;
    }

    </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> updateUser(User user) {

    }

    </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> removeUser(User user) {
        PreparedStatement prep </span>= <span style="color: #0000ff;">null</span><span style="color: #000000;">;
        </span><span style="color: #0000ff;">try</span><span style="color: #000000;"> {
            prep </span>= conn.prepareStatement("DELETE FROM USER WHERE username=?"<span style="color: #000000;">);
            prep.setString(</span>1<span style="color: #000000;">, user.getUsername());
            prep.execute();
        } </span><span style="color: #0000ff;">catch</span><span style="color: #000000;"> (SQLException e) {
            e.printStackTrace();
        } </span><span style="color: #0000ff;">finally</span><span style="color: #000000;"> {
            </span><span style="color: #0000ff;">try</span><span style="color: #000000;"> {
                prep.close();
            } </span><span style="color: #0000ff;">catch</span><span style="color: #000000;"> (SQLException e) {
                e.printStackTrace();
            }
        }
    }

    </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">boolean</span><span style="color: #000000;"> find(String username) {
        </span><span style="color: #0000ff;">boolean</span> flag = <span style="color: #0000ff;">false</span><span style="color: #000000;">;
        PreparedStatement prep </span>= <span style="color: #0000ff;">null</span><span style="color: #000000;">;
        </span><span style="color: #0000ff;">try</span><span style="color: #000000;"> {
            prep </span>= conn.prepareStatement("SELECT 1 FROM USER WHERE username=?"<span style="color: #000000;">);
            prep.setString(</span>1<span style="color: #000000;">, username);
            flag </span>=<span style="color: #000000;"> prep.executeQuery().next();
        } </span><span style="color: #0000ff;">catch</span><span style="color: #000000;"> (SQLException e) {
            e.printStackTrace();
        } </span><span style="color: #0000ff;">finally</span><span style="color: #000000;"> {
            </span><span style="color: #0000ff;">try</span><span style="color: #000000;"> {
                prep.close();
            } </span><span style="color: #0000ff;">catch</span><span style="color: #000000;"> (SQLException e) {
                e.printStackTrace();
            }
        }
        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> flag;
    }
}</span></pre>
</div>
<p>&nbsp;</p>