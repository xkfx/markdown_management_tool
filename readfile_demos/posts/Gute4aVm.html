<h2>如何向JAR添加资源</h2>
<p>原文链接：<a href="https://maven.apache.org/guides/getting-started/index.html#How_do_I_add_resources_to_my_JAR" target="_blank">https://maven.apache.org/guides/getting-started/index.html#How_do_I_add_resources_to_my_JAR</a></p>
<p>另一个可以满足的不需要对上面的POM进行更改的常见用例是将资源打包到JAR文件中。对于这个常见的任务，Maven再次依赖于标准目录布局（<a href="https://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html" target="_blank">Standard Directory Layout</a>），这意味着通过使用标准的Maven约定，您可以将资源打包到JAR中，只需将这些资源放置在一个标准的目录结构中。</p>
<p>您可以在下面的示例中看到，我们已经添加了目录<span style="color: #0000ff;"><em>${basedir}/src/main/resources</em></span>，我们将想要打包到JAR中的任何资源放在这个目录中。Maven使用的简单规则是：任何放在<em><span style="color: #0000ff;">${basedir}/src/main/resources</span></em>目录中的目录或文件都被打包到JAR中，从JAR的底部开始使用完全相同的结构。</p>
<div class="cnblogs_code">
<pre><span style="color: #000000;">my-app
|-- pom.xml
`-- src
    |-- main
    |   |-- java
    |   |   `-- com
    |   |       `-- mycompany
    |   |           `-- app
    |   |               `-- App.java
<strong>    |   `-- resources
<span style="color: #ff0000;">    |       `-- META-INF
    |           `-- application.properties</span></strong>
    `-- test
        `-- java
            `-- com
                `-- mycompany
                    `-- app
                        `-- AppTest.java</span></pre>
</div>
<p>因此，在我们的示例中可以看到，我们在那个目录下有一个带有application.properties文件的META-INF目录。如果你打开Maven为你创建的JAR，看一看，你会看到以下内容：</p>
<div class="cnblogs_code">
<pre><span style="color: #000000;"><span style="color: #ff0000;"><strong>|-- META-INF</strong></span>
|   |-- MANIFEST.MF
<strong><span style="color: #ff0000;">|   |-- application.properties</span></strong>
|   `-- maven
|       `-- com.mycompany.app
|           `-- my-app
|               |-- pom.properties
|               `-- pom.xml
`-- com
    `-- mycompany
        `-- app
            `-- App.class</span></pre>
</div>
<p>如您所见，<span style="color: #0000ff;"><em>${basedir}/src/main/resources</em></span>的内容可以从JAR底部开始找到，并且我们的&nbsp;<span style="color: #0000ff;"><em>application.properties&nbsp;</em></span>文件在&nbsp;<em><span style="color: #0000ff;">META-INF&nbsp;</span></em>目录中。您还会注意到其他一些文件，如 <span style="color: #0000ff;"><em>META-INF/MANIFEST.MF</em></span> 以及一个 <em><span style="color: #0000ff;">pom.xml</span></em> 和 <span style="color: #0000ff;"><em>pom.properties</em></span> 文件。这些都是Maven中生成JAR时的标准配置。如果您愿意，您可以创建自己的清单（<em><span style="color: #0000ff;">manifest</span></em>），但如果不这样做，Maven将默认生成一个清单。(您也可以修改默认清单中的条目。我们将在稍后讨论这个问题。)。<span style="color: #0000ff;"><em>pom.xml</em></span>&nbsp;和<span style="color: #0000ff;">&nbsp;<em>pom.properties</em>&nbsp;</span>文件打包在JAR中，这样Maven生成的每个工件（<em><span style="color: #0000ff;">artifact</span></em>）都是自描述的，并且还允许您在需要时在自己的应用程序中使用元数据（metadata）。一个简单的用途可能是检索应用程序的版本。操作POM文件需要使用一些Maven工具，但属性（the properties）可以使用标准的Java API，如下所示：</p>
<div class="cnblogs_code">
<pre><span style="color: #000000;">#Generated by Maven
#Tue Oct 04 15:43:21 GMT-05:00 2005
version=1.0-SNAPSHOT
groupId=com.mycompany.app
artifactId=my-app</span></pre>
</div>
<p>要将资源添加到单元测试的类路径中，除了将资源放置在 <em><span style="color: #0000ff;">${basedir}/src/test/resources</span></em> 目录之外，您需要遵循与将资源添加到JAR相同的模式。在这一点上，你会有一个项目目录结构，看起来像下面：</p>
<div class="cnblogs_code">
<pre><span style="color: #000000;">my-app
|-- pom.xml
`-- src
    |-- main
    |   |-- java
    |   |   `-- com
    |   |       `-- mycompany
    |   |           `-- app
    |   |               `-- App.java
    |   `-- resources
    |       `-- META-INF
    |           |-- application.properties
    `-- test
        |-- java
        |   `-- com
        |       `-- mycompany
        |           `-- app
        |               `-- AppTest.java
<strong><span style="color: #0000ff;">        `-- resources
            `-- test.properties</span></strong></span></pre>
</div>
<p>在单元测试中，你可以使用如下简单的代码片段来访问测试所需的资源：</p>
<div class="cnblogs_code">
<pre><span style="color: #008080;">1</span> <span style="color: #000000;">...
</span><span style="color: #008080;">2</span>  
<span style="color: #008080;">3</span> <span style="color: #008000;">//</span><span style="color: #008000;"> Retrieve resource</span>
<span style="color: #008080;">4</span> InputStream is = getClass().getResourceAsStream( "/test.properties"<span style="color: #000000;"> );
</span><span style="color: #008080;">5</span>  
<span style="color: #008080;">6</span> <span style="color: #008000;">//</span><span style="color: #008000;"> Do something with the resource</span>
<span style="color: #008080;">7</span>  
<span style="color: #008080;">8</span> ...</pre>
</div>
<h2>标准目录布局的介绍</h2>
<p>拥有一个通用的目录布局，可以让熟悉一个Maven项目的用户立即熟悉另一个Maven项目。&nbsp;The advantages are analogous to adopting a site-wide look-and-feel.</p>
<p>下一节记录Maven期望的目录布局和Maven创建的目录布局。尽量遵循这个结构。但是，如果不能，这些设置可以通过项目描述符（&nbsp;the project descriptor）重写。</p>
<table border="0">
<tbody>
<tr>
<td>src/main/java</td>
<td>Application/Library sources</td>
</tr>
<tr>
<td>src/main/resources</td>
<td>Application/Library resources</td>
</tr>
<tr>
<td>src/main/filters</td>
<td>Resource filter files</td>
</tr>
<tr>
<td><span style="color: #ff0000;">src/main/webapp</span></td>
<td><span style="color: #ff0000;">Web application sources</span></td>
</tr>
<tr>
<td>src/test/java</td>
<td>Test sources</td>
</tr>
<tr>
<td>src/test/resources</td>
<td>Test resources</td>
</tr>
<tr>
<td>src/test/filters</td>
<td>Test resource filter files</td>
</tr>
<tr>
<td>src/it</td>
<td>Integration Tests (primarily for plugins)</td>
</tr>
<tr>
<td>src/assembly</td>
<td>Assembly descriptors</td>
</tr>
<tr>
<td>src/site</td>
<td>Site</td>
</tr>
<tr>
<td>LICENSE.txt</td>
<td>Project's license</td>
</tr>
<tr>
<td>NOTICE.txt</td>
<td>Notices and attributions required by libraries that the project depends on</td>
</tr>
<tr>
<td>README.txt</td>
<td>Project's readme</td>
</tr>
</tbody>
</table>
<p>在顶层，描述项目的文件:一个<em><span style="color: #0000ff;">pom.xml</span></em>文件。此外，还有一些文本文档，用户可以在收到源代码后立即阅读：<span style="color: #0000ff;"><em>README.txt</em></span>、<span style="color: #0000ff;"><em>LICENSE.txt</em></span>等。</p>
<p>这个结构只有两个子目录：<em><span style="color: #0000ff;">src</span></em>和<span style="color: #0000ff;"><em>target</em></span>。这里唯一需要的其他目录是像<span style="color: #0000ff;"><em>CVS</em></span>、<em><span style="color: #0000ff;">.git</span></em>或<em><span style="color: #0000ff;">.svn</span></em>这样的元数据（metadata&nbsp;），以及多项目构建中的任何子项目（每个子项目都将如上所示）。</p>
<p><em><span style="color: #0000ff;">target</span></em>目录用于存放构建的所有输出。</p>
<p><em><span style="color: #0000ff;">src</span></em>目录包含了所有用于构建项目的源材料，它的站点等等。它包含每种类型的子目录：<span style="color: #0000ff;"><em>main</em></span>用于主构建工件（the main build artifact），<span style="color: #0000ff;"><em>test</em></span>用于单元测试代码和资源，<span style="color: #0000ff;"><em>site</em></span>等等。</p>
<p>在工件产生源目录（&nbsp;artifact producing source directories，例如<span style="color: #0000ff;"><em> main</em></span> 和<em><span style="color: #0000ff;"> test</span></em>），一个目录用于<span style="color: #0000ff;"><em>Java</em></span>语言（正常的包层次结构存在于此），另一个目录用于资源（给定默认资源定义，该结构被复制到目标类路径）。</p>
<p>如果对工件构建（the artifact build）有其他起作用的源，它们将在其他子目录下。例如，<span style="color: #0000ff;"><em>src/main/antlr</em></span>会包含<span style="color: #0000ff;"><em>antlr</em></span>语法定义文件。</p>
<p>&nbsp;</p>