<div id="diy_right_menu">
<p>内容索引：</p>
<ul>
<li><a href="#a0">HOW TO USE</a></li>
<li><a href="#a1">CSS</a></li>
<li><a href="#a2">JS</a></li>
<li><a href="#a3">效果展示</a></li>
<li><a href="#a7">后续1：目录太长</a></li>
<li><a href="#b1">后续2：入场动画</a></li>
<li><a href="#a4" target="_blank">点个赞😀</a></li>
</ul>
</div>
<p>存着备用。。</p>
<p>长篇文章如果没有侧边目录的话，会很不方便浏览。</p>
<p>代码是网上找来改的。</p>
<p><a name="a0"></a>首先，我们把目标区域（目录）用一个div包装一下：</p>
<div class="cnblogs_code">
<pre><span style="color: #800000;">&lt;div id="</span>diy_right_menu<span style="color: #800000;">"&gt;&lt;/div&gt;</span></pre>
</div>
<p><a name="a1"></a>针对这个div写CSS（在后台管理处设置），把目录固定在浏览器的右上角：</p>
<div class="cnblogs_code">
<pre><span style="color: #800000;">            #diy_right_menu </span>{<span style="color: #ff0000;">
                opacity</span>:<span style="color: #0000ff;"> 0.05</span>;<span style="color: #ff0000;">
                position</span>:<span style="color: #0000ff;"> fixed</span>;<span style="color: #ff0000;">
                right</span>:<span style="color: #0000ff;"> 2%</span>;<span style="color: #ff0000;">
                top</span>:<span style="color: #0000ff;"> 2%</span>;<span style="color: #ff0000;">
                width</span>:<span style="color: #0000ff;"> 20em</span>;<span style="color: #ff0000;">
                margin-top</span>:<span style="color: #0000ff;"> 1em</span>;<span style="color: #ff0000;">
                background-color</span>:<span style="color: #0000ff;"> black</span>;<span style="color: #ff0000;">
                padding</span>:<span style="color: #0000ff;"> 1em</span>;<span style="color: #ff0000;">
                border-radius</span>:<span style="color: #0000ff;"> 0</span>;<span style="color: #ff0000;">
                transition</span>:<span style="color: #0000ff;"> 0.6s ease-in-out</span>;<span style="color: #ff0000;">
                color</span>:<span style="color: #0000ff;"> white</span>;
            }<span style="color: #800000;">
            
            #diy_right_menu:hover </span>{<span style="color: #ff0000;">
                color</span>:<span style="color: #0000ff;"> white</span>;<span style="color: #ff0000;">
                right</span>:<span style="color: #0000ff;"> 2%</span>;<span style="color: #ff0000;">
                top</span>:<span style="color: #0000ff;"> 2%</span>;<span style="color: #ff0000;">
                border-radius</span>:<span style="color: #0000ff;"> 5%</span>;<span style="color: #ff0000;">
                opacity</span>:<span style="color: #0000ff;"> 1.3</span>;<span style="color: #ff0000;">
                box-shadow</span>:<span style="color: #0000ff;"> 0 10px 20px rgba(0, 0, 0, 0.5)</span>;<span style="color: #ff0000;">
                transition</span>:<span style="color: #0000ff;"> 0.4s ease-in-out</span>;
            }<span style="color: #800000;">
            
            #diy_right_menu a </span>{<span style="color: #ff0000;">
                color</span>:<span style="color: #0000ff;"> #f2f2f2cc</span>;<span style="color: #ff0000;">
                transition</span>:<span style="color: #0000ff;"> 0.4s ease-in-out</span>;
            }<span style="color: #800000;">
            
            #diy_right_menu a:hover </span>{<span style="color: #ff0000;">
                font-size</span>:<span style="color: #0000ff;"> larger</span>;<span style="color: #ff0000;">
                color</span>:<span style="color: #0000ff;"> blue</span>;<span style="color: #ff0000;">
                background-color</span>:<span style="color: #0000ff;"> bisque</span>;<span style="color: #ff0000;">
                transition</span>:<span style="color: #0000ff;"> 0.4s ease-in-out</span>;
            }</pre>
</div>
<p>因为一直飘在那里会遮挡文字，所以设定为鼠标移动过去才显示出来。</p>
<p>虽然我也试过其它方法，例如把这个div设置为可拖动（如下&darr; <a href="https://blog.csdn.net/qq_28508217/article/details/53511593" target="_blank">原作者链接</a>）、类似qq一样隐藏在边缘（css即可实现），但是感觉都太繁琐了、甚至还有点卡。。</p>
<div class="cnblogs_code">
<pre>        &lt;script&gt;
            <span style="color: #0000ff;">var</span><span style="color: #000000;"> posX;
            </span><span style="color: #0000ff;">var</span><span style="color: #000000;"> posY;
            fwuss </span>= document.getElementById("diy_right_menu"<span style="color: #000000;">);
            fwuss.onmousedown </span>= <span style="color: #0000ff;">function</span><span style="color: #000000;">(e) {
                posX </span>= event.x - fwuss.offsetLeft; <span style="color: #008000;">//</span><span style="color: #008000;">获得横坐标x</span>
                posY = event.y - fwuss.offsetTop; <span style="color: #008000;">//</span><span style="color: #008000;">获得纵坐标y</span>
                document.onmousemove = mousemove; <span style="color: #008000;">//</span><span style="color: #008000;">调用函数，只要一直按着按钮就能一直调用</span>
<span style="color: #000000;">            }
            document.onmouseup </span>= <span style="color: #0000ff;">function</span><span style="color: #000000;">() {
                document.onmousemove </span>= <span style="color: #0000ff;">null</span>; <span style="color: #008000;">//</span><span style="color: #008000;">鼠标举起，停止</span>
<span style="color: #000000;">            }

            </span><span style="color: #0000ff;">function</span><span style="color: #000000;"> mousemove(ev) {
                </span><span style="color: #0000ff;">if</span>(ev == <span style="color: #0000ff;">null</span>) ev = window.event; <span style="color: #008000;">//</span><span style="color: #008000;">IE</span>
                fwuss.style.left = (ev.clientX - posX) + "px"<span style="color: #000000;">;
                fwuss.style.top </span>= (ev.clientY - posY) + "px"<span style="color: #000000;">;
            }
        </span>&lt;/script&gt;</pre>
</div>
<p><a name="a2"></a>点击链接后进行页内滑动（jquery博客园自带）：</p>
<div class="cnblogs_code">
<pre>        &lt;script type="text/javascript"&gt;
            <span style="color: #008000;">//</span><span style="color: #008000;">点击链接页面滑动到指定区域</span>
            $(document).ready(<span style="color: #0000ff;">function</span><span style="color: #000000;">() {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                $(</span>'a').click(<span style="color: #0000ff;">function</span><span style="color: #000000;">() {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    </span><span style="color: #0000ff;">var</span> className = $.attr(<span style="color: #0000ff;">this</span>, 'href').substr(1); <span style="color: #008000;">//</span><span style="color: #008000;">获取href参数#后面的ID                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                    $('html, body'<span style="color: #000000;">).animate({&nbsp;&nbsp;&nbsp;&nbsp;
                        scrollTop: $(</span>'a[name="' + className + '"]').offset().top <span style="color: #008000;">//</span><span style="color: #008000;">获取a书签的scrollTop值    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                    }, 500); <span style="color: #008000;">//</span><span style="color: #008000;">以500毫秒滑行        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                    <span style="color: #0000ff;">return</span> <span style="color: #0000ff;">false</span><span style="color: #000000;">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                });&nbsp;&nbsp;&nbsp;&nbsp;
            });
        </span>&lt;/script&gt;</pre>
</div>
<p><a name="a3"></a>用css包装后的效果示意图（实际滑动很流畅）：</p>
<p><img src="https://images2018.cnblogs.com/blog/1042431/201808/1042431-20180810151247009-1131205655.gif" alt="" width="454" height="275" /></p>
<p>&nbsp;</p>
<p><a name="a7"></a>后续1：目录太长</p>
<p>两行css解决</p>
<div class="cnblogs_code">
<pre><span style="color: #800000;">overflow-y: auto;
max-height: 450px;</span></pre>
</div>
<p><a name="b1"></a>后续2：添加入场动画：</p>
<div class="cnblogs_code">
<pre><span style="color: #800000;">            @-webkit-keyframes myfirst </span>{
                <span style="color: #008000;">/*</span><span style="color: #008000;"> Safari and Chrome </span><span style="color: #008000;">*/</span><span style="color: #ff0000;">
                0% {
                    transform</span>:<span style="color: #0000ff;"> translateX(8px)</span>;
                }<span style="color: #800000;">
                33% </span>{<span style="color: #ff0000;">
                    opacity</span>:<span style="color: #0000ff;"> 1</span>;<span style="color: #ff0000;">
                    border-radius</span>:<span style="color: #0000ff;"> 5%</span>;<span style="color: #ff0000;">
                    background-color</span>:<span style="color: #0000ff;"> bisque</span>;<a name="a4"></a>
                }<span style="color: #800000;">
                66% </span>{
                }</pre>
</div>
<div class="cnblogs_code">
<pre><span style="color: #800000;">-webkit-animation: myfirst 1.8s;</span></pre>
</div>
<p>&nbsp;</p>