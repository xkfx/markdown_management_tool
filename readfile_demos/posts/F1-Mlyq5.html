<style><!--
@page { margin: 2cm }
		p { margin-bottom: 0.25cm; direction: ltr; color: #000000; line-height: 120%; text-align: justify; orphans: 0; widows: 0 }
		p.western { font-family: "Times New Roman", serif; font-size: 10pt; so-language: en-US }
		p.cjk { font-family: "宋体", "SimSun"; font-size: 10pt; so-language: zh-CN }
		p.ctl { font-family: "Times New Roman", serif; font-size: 12pt; so-language: ar-SA }
--></style>
<p class="cjk">一<span style="font-family: 'Times New Roman', serif;"><span lang="en-US">.</span></span>写出程序运行结果</p>
<p class="cjk"><span style="font-family: 'Times New Roman', serif;"><span lang="en-US"><span>1#include &lt;iostream &gt;</span></span></span></p>
<p class="cjk"><span style="font-family: 'Times New Roman', serif;"><span lang="en-US"><span>using namespace std;</span></span></span></p>
<p class="cjk"><span style="font-family: 'Times New Roman', serif;"><span><span lang="en-US">int a[10]={1,2, 3, 4, 5, 6, 7, 8, 9, 10};</span></span></span></p>
<p class="cjk"><span style="font-family: 'Times New Roman', serif;"><span><span lang="en-US">int fun( int i);</span></span></span></p>
<p class="cjk"><span style="font-family: 'Times New Roman', serif;"><span><span lang="en-US">void main()</span></span></span></p>
<p class="cjk"><span style="font-family: 'Times New Roman', serif;"><span><span lang="en-US">{int i ,s=0;</span></span></span></p>
<p class="cjk"><span style="font-family: 'Times New Roman', serif;"><span><span lang="en-US">for( i=0;i&lt;=10;i++)</span></span></span></p>
<p class="cjk"><span style="font-family: 'Times New Roman', serif;"><span lang="en-US"><span>{ </span><span>try</span></span></span></p>
<p class="cjk"><span style="font-family: 'Times New Roman', serif;"><span><span lang="en-US">{ s=s+fun(i);}</span></span></span></p>
<p class="cjk"><span style="font-family: 'Times New Roman', serif;"><span><span lang="en-US">catch(int)</span></span></span></p>
<p class="cjk"><span style="font-family: 'Times New Roman', serif;"><span lang="en-US"><span>{cout&lt;&lt;</span><span>&rdquo;</span></span></span><span>数组下标越界</span><span style="font-family: 'Times New Roman', serif;"><span lang="en-US"><span>!</span><span>&rdquo;</span><span>&lt;&lt;endl;}</span></span></span></p>
<p class="cjk"><span style="font-family: 'Times New Roman', serif;"><span lang="en-US"><span>}</span></span></span></p>
<p class="cjk"><span style="font-family: 'Times New Roman', serif;"><span lang="en-US"><span>cout&lt;&lt;"s=</span><span>&rdquo;</span><span>&lt;&lt;s&lt;&lt;endl;</span></span></span></p>
<p class="cjk"><span style="font-family: 'Times New Roman', serif;"><span><span lang="en-US">}</span></span></span></p>
<p class="cjk"><span style="font-family: 'Times New Roman', serif;"><span><span lang="en-US">int fun( int i)</span></span></span></p>
<p class="cjk"><span style="font-family: 'Times New Roman', serif;"><span><span lang="en-US">{if(i&gt;=10)</span></span></span></p>
<p class="cjk"><span style="font-family: 'Times New Roman', serif;"><span><span lang="en-US">throw i;</span></span></span></p>
<p class="cjk"><span style="font-family: 'Times New Roman', serif;"><span><span lang="en-US">return a[i];</span></span></span></p>
<p class="cjk"><span style="font-family: 'Times New Roman', serif;"><span><span lang="en-US">}</span></span></span></p>
<p class="cjk"><span>数组下标越界</span><span style="font-family: 'Times New Roman', serif;"><span lang="en-US"><span>!</span></span></span></p>
<p class="cjk"><span style="font-family: 'Times New Roman', serif;"><span lang="en-US"><span>S</span><span>=55</span></span></span></p>
<p class="cjk"><span style="font-family: 'Times New Roman', serif;"><span lang="en-US">2<span> #include &lt;iostream&gt;</span></span></span></p>
<p class="cjk"><span style="font-family: 'Times New Roman', serif;"><span lang="en-US"><span>using namespace std;</span></span></span></p>
<p class="cjk"><span style="font-family: 'Times New Roman', serif;"><span><span lang="en-US">void f();</span></span></span></p>
<p class="cjk"><span style="font-family: 'Times New Roman', serif;"><span><span lang="en-US">class T</span></span></span></p>
<p class="cjk"><span style="font-family: 'Times New Roman', serif;"><span><span lang="en-US">{public:</span></span></span></p>
<p class="cjk"><span style="font-family: 'Times New Roman', serif;"><span><span lang="en-US">T( )</span></span></span></p>
<p class="cjk"><span style="font-family: 'Times New Roman', serif;"><span><span lang="en-US">{cout&lt;&lt;"constructor"&lt;&lt;endl;</span></span></span></p>
<p class="cjk"><span style="font-family: 'Times New Roman', serif;"><span><span lang="en-US"> try</span></span></span></p>
<p class="cjk"><span style="font-family: 'Times New Roman', serif;"><span lang="en-US"><span>{throw "exception";}</span></span></span></p>
<p class="cjk"><span style="font-family: 'Times New Roman', serif;"><span><span lang="en-US">catch( char*)</span></span></span></p>
<p class="cjk"><span style="font-family: 'Times New Roman', serif;"><span lang="en-US"><span>{cout&lt;&lt;"exception</span><span>&rdquo;</span><span>&lt;&lt;endl;}</span></span></span></p>
<p class="cjk"><span style="font-family: 'Times New Roman', serif;"><span lang="en-US"><span>throw</span><span> "exception";</span></span></span></p>
<p class="cjk"><span style="font-family: 'Times New Roman', serif;"><span><span lang="en-US">}</span></span></span></p>
<p class="cjk"><span style="font-family: 'Times New Roman', serif;"><span><span lang="en-US">~T( ) {cout&lt;&lt;"destructor";}</span></span></span></p>
<p class="cjk"><span style="font-family: 'Times New Roman', serif;"><span><span lang="en-US">};</span></span></span></p>
<p class="cjk"><span style="font-family: 'Times New Roman', serif;"><span><span lang="en-US">void main()</span></span></span></p>
<p class="cjk"><span style="font-family: 'Times New Roman', serif;"><span lang="en-US"><span>{cout&lt;&lt;"main function</span><span>&rdquo;</span><span>&lt;&lt; endl;</span></span></span></p>
<p class="cjk"><span style="font-family: 'Times New Roman', serif;"><span><span lang="en-US">try{ f( ); }</span></span></span></p>
<p class="cjk"><span style="font-family: 'Times New Roman', serif;"><span><span lang="en-US">catch( char *)</span></span></span></p>
<p class="cjk"><span style="font-family: 'Times New Roman', serif;"><span><span lang="en-US">{ cout&lt;&lt;"exception2"&lt;&lt;endl;}</span></span></span></p>
<p class="cjk"><span style="font-family: 'Times New Roman', serif;"><span lang="en-US"><span>cout&lt;&lt;"main function</span><span>&rdquo;</span><span>&lt;&lt;endl;</span></span></span></p>
<p class="cjk"><span style="font-family: 'Times New Roman', serif;"><span><span lang="en-US">}</span></span></span></p>
<p class="cjk"><span style="font-family: 'Times New Roman', serif;"><span><span lang="en-US">void f( )</span></span></span></p>
<p class="cjk"><span style="font-family: 'Times New Roman', serif;"><span lang="en-US"><span>{ </span><span>T t</span><span>;</span><span> }</span></span></span></p>
<p class="cjk"><span style="font-family: 'Times New Roman', serif;"><span lang="en-US"> <span>main function</span></span></span></p>
<p class="cjk"><span style="font-family: 'Times New Roman', serif;"><span lang="en-US"> <span>constructor</span></span></span></p>
<p class="cjk"><span style="font-family: 'Times New Roman', serif;"><span lang="en-US"><span> exception</span></span></span></p>
<p class="cjk"><span style="font-family: 'Times New Roman', serif;"><span lang="en-US"><span> exception2</span></span></span></p>
<p class="cjk"><span style="font-family: 'Times New Roman', serif;"><span><span lang="en-US">main function</span></span></span></p>
<p class="cjk">二、程序设计题</p>
<p class="cjk"><span style="font-family: 'Times New Roman', serif;"><span lang="en-US">1</span></span>以<span style="font-family: 'Times New Roman', serif;"><span lang="en-US">String</span></span>类为例，在<span style="font-family: 'Times New Roman', serif;"><span lang="en-US">String</span></span>类的构造函数中使用<span style="font-family: 'Times New Roman', serif;"><span lang="en-US">new</span></span>分配内存。如果操作不成功，则用<span style="font-family: 'Times New Roman', serif;"><span lang="en-US">try</span></span>语句触发一个<span style="font-family: 'Times New Roman', serif;"><span lang="en-US">char</span></span>类型异常，用<span style="font-family: 'Times New Roman', serif;"><span lang="en-US">catch</span></span>语句捕获该异常。同时将异常处理机制与其他处理方式对内存分配失败这一异常进行处理对比，体会异常处理机制的优点。</p>
<p class="cjk"><br />

</p>
<p class="cjk"><br />

</p>
<p class="cjk"><span style="font-family: 'Times New Roman', serif;"><span lang="en-US">2</span></span>在<span style="font-family: 'Times New Roman', serif;"><span lang="en-US">1</span></span>的基础上，重载数组下标操作符［］，使之具有判断与处理下标越界功能。</p>
<p class="cjk">解法一</p>
<p class="cjk"><span style="font-family: 'Times New Roman', serif;"><span lang="en-US">#include
&lt;iostream&gt;</span></span></p>
<p class="cjk"><span style="font-family: 'Times New Roman', serif;"><span lang="en-US">#include
&lt;cstring&gt;</span></span></p>
<p class="cjk"><span style="font-family: 'Times New Roman', serif;"><span lang="en-US">using
namespace std;</span></span></p>
<p class="cjk"><span style="font-family: 'Times New Roman', serif;"><span lang="en-US">class
String{</span></span></p>
<p class="cjk"><span style="font-family: 'Times New Roman', serif;"><span lang="en-US">public:</span></span></p>
<p class="cjk">   
<span style="font-family: 'Times New Roman', serif;"><span lang="en-US">String(const
char*);</span></span></p>
<p class="cjk">   
<span style="font-family: 'Times New Roman', serif;"><span lang="en-US">String(const
String&amp;);</span></span></p>
<p class="cjk">   
<span style="font-family: 'Times New Roman', serif;"><span lang="en-US">~String();</span></span></p>
<p class="cjk"><span style="font-family: 'Times New Roman', serif;"><span lang="en-US">	char
operator[](int);</span></span></p>
<p class="cjk"><span style="font-family: 'Times New Roman', serif;"><span lang="en-US">	void
ShowStr(){cout&lt;&lt;sPtr&lt;&lt;endl;}</span></span></p>
<p class="cjk"><br />

</p>
<p class="cjk"><span style="font-family: 'Times New Roman', serif;"><span lang="en-US">private:</span></span></p>
<p class="cjk">    <span style="font-family: 'Times New Roman', serif;"><span lang="en-US">char
*sPtr;</span></span></p>
<p class="cjk"><span style="font-family: 'Times New Roman', serif;"><span lang="en-US">};</span></span></p>
<p class="cjk">&nbsp;</p>
<p class="cjk">&nbsp;</p>
<div class="cnblogs_Highlighter">
<pre class="brush:cpp;gutter:true;">1
#include &lt;iostream&gt;
using namespace std;

int a[10]={1,2, 3, 4, 5, 6, 7, 8, 9, 10};
int fun( int i);

void main()
{
	int i, s=0;
    for(i=0; i&lt;=10; i++) { // 第十趟不会完整运行
		try { 
			s=s+fun(i);
		} catch(int) {
			cout&lt;&lt;"数组下标越界!"&lt;&lt;endl;
		}
	}
    cout&lt;&lt;"s="&lt;&lt;s&lt;&lt;endl;
}

int fun(int i) {
	if (i&gt;=10) throw i;
    return a[i];
}

2
 #include &lt;iostream&gt;
 using namespace std;

void f();

class T {
public:
	T() {
		cout&lt;&lt;"constructor"&lt;&lt;endl; // 2
		try
        {	throw  "exception";} 
		catch( char*)
        {	cout&lt;&lt;"exception"&lt;&lt;endl;} // 3
			throw  "exception";
		}
	~T( ) {cout&lt;&lt;"destructor";} // 不被执行
};

void main()
{
	cout&lt;&lt;"main function"&lt;&lt; endl; // 1
	try { f( ); }
	catch( char *)
      { cout&lt;&lt;"exception2"&lt;&lt;endl;} // 4
	cout&lt;&lt;"main function"&lt;&lt;endl; // 5
}

void f( )
{  T t;  }

3
#include &lt;iostream&gt;
#include &lt;cstring&gt;
using namespace std;
class String{
public:
    String(const char*);
    String(const String&amp;);
    ~String();
	char operator[](int i);
	void ShowStr(){cout&lt;&lt;sPtr&lt;&lt;endl;}

private:
    char *sPtr;
};

// 构造函数
String::String(const char *s) {
	sPtr = new char[strlen(s)+1];
	if (sPtr == NULL) throw ("Constructor abnormal");
	strcpy(sPtr, s);
}

String::String(const String&amp; copy) {
	sPtr = new char[strlen(copy.sPtr) + 1];
	if (sPtr == NULL) throw ("Copy constructor abnormal");
	strcpy(sPtr, copy.sPtr);
}

String::~String() {
	delete[] sPtr;
}

// 重载数组下标操作符
char String::operator [] (int i) {
	if (i &lt; 0 || i &gt; strlen(sPtr)) throw ("Exception: overflow.\n");
	return sPtr[i];
}

int main()
{
	String hi("hello");

	try {
		hi.ShowStr();

		printf("hi[0]=%c\n", hi[0]);
		printf("hi[1]=%c\n", hi[1]);
		printf("hi[2]=%c\n", hi[2]);
		printf("hi[3]=%c\n", hi[3]);
		printf("hi[4]=%c\n", hi[4]);
		printf("hi[5]=%c(zero)\n", hi[5]);
		printf("hi[6]=%c\n", hi[6]); // error!
	} catch (char* exception) {
		cout &lt;&lt; exception &lt;&lt; endl;
	}

	return 0;
}

/*
output:
hello
hi[0]=h
hi[1]=e
hi[2]=l
hi[3]=l
hi[4]=o
hi[5]= (zero)
Exception: overflow.
*/
</pre>
</div>
<p class="cjk">&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p class="cjk">&nbsp;</p>