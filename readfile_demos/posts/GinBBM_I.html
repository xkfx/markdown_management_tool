<p>1、首先，写一个download.html放至D:\apache-tomcat-7.0.77\webapps\JarDownload-v1。</p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff;">&lt;!</span><span style="color: #ff00ff;">DOCTYPE HTML</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">html</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">body</span><span style="color: #0000ff;">&gt;</span>
        <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">form </span><span style="color: #ff0000;">action</span><span style="color: #0000ff;">="JarDownload.do"</span><span style="color: #ff0000;"> method</span><span style="color: #0000ff;">="get"</span><span style="color: #0000ff;">&gt;</span>
            <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">br </span><span style="color: #0000ff;">/&gt;</span><span style="color: #000000;">
            提取码:</span><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">input </span><span style="color: #ff0000;">type</span><span style="color: #0000ff;">="text"</span><span style="color: #ff0000;"> name</span><span style="color: #0000ff;">="passwd"</span> <span style="color: #0000ff;">/&gt;&lt;</span><span style="color: #800000;">br </span><span style="color: #0000ff;">/&gt;</span>
            <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">br </span><span style="color: #0000ff;">/&gt;</span>
            <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">input </span><span style="color: #ff0000;">type</span><span style="color: #0000ff;">="submit"</span> <span style="color: #0000ff;">/&gt;</span>
        <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">form</span><span style="color: #0000ff;">&gt;</span>
        
        <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">br </span><span style="color: #0000ff;">/&gt;</span>
        <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">p</span><span style="color: #0000ff;">&gt;</span>提取码为123456。<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">p</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">body</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">html</span><span style="color: #0000ff;">&gt;</span></pre>
</div>
<p>&nbsp;</p>
<p>2、启动tomcat，并通过浏览器测试页面。</p>
<p>先执行命令行指令D:\apache-tomcat-7.0.77\bin&gt;startup.sh</p>
<p>然后打开浏览器，输入URL：http://localhost:8080/JarDownload-v1/download.html</p>
<p><img src="http://images2015.cnblogs.com/blog/1042431/201705/1042431-20170531222748868-1080156093.png" alt="" width="230" height="129" /></p>
<p>&nbsp;</p>
<p>3、编写web.xml并测试，放至D:\apache-tomcat-7.0.77\webapps\JarDownload-v1\WEB-INF，最好重启一下tomcat。</p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff;">&lt;?</span><span style="color: #ff00ff;">xml version="1.0" encoding="ISO-8859-1" </span><span style="color: #0000ff;">?&gt;</span>

<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">web-app </span><span style="color: #ff0000;">xmlns</span><span style="color: #0000ff;">="http://java.sun.com/xml/ns/j2ee"</span><span style="color: #ff0000;">
         xmlns:xsi</span><span style="color: #0000ff;">="http://www.w3.org/2001/XMLSchema-instance"</span><span style="color: #ff0000;">
         xsi:schemaLocation</span><span style="color: #0000ff;">="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd"</span><span style="color: #ff0000;">
         version</span><span style="color: #0000ff;">="2.4"</span><span style="color: #0000ff;">&gt;</span>

    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">servlet</span><span style="color: #0000ff;">&gt;</span>
        <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">servlet-name</span><span style="color: #0000ff;">&gt;</span>Test<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">servlet-name</span><span style="color: #0000ff;">&gt;</span>
        <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">servlet-class</span><span style="color: #0000ff;">&gt;</span>com.example.web.JarDownload<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">servlet-class</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">servlet</span><span style="color: #0000ff;">&gt;</span>

    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">servlet-mapping</span><span style="color: #0000ff;">&gt;</span>
        <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">servlet-name</span><span style="color: #0000ff;">&gt;</span>Test<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">servlet-name</span><span style="color: #0000ff;">&gt;</span>
        <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">url-pattern</span><span style="color: #0000ff;">&gt;</span>/JarDownload.do<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">url-pattern</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">servlet-mapping</span><span style="color: #0000ff;">&gt;</span>

<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">web-app</span><span style="color: #0000ff;">&gt;</span></pre>
</div>
<p>&nbsp;</p>
<p>4、准备一个测试Jar包，放在D:\apache-tomcat-7.0.77\webapps\JarDownload-v1</p>
<p>&nbsp;</p>
<p>5、编写全名为com.example.web.JarDownload的Servlet，编译成.class文件后部署到D:\apache-tomcat-7.0.77\webapps\JarDownload-v1\WEB-INF\classes\com\example\web</p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff;">package</span><span style="color: #000000;"> com.example.web;

</span><span style="color: #0000ff;">import</span> javax.servlet.*<span style="color: #000000;">;
</span><span style="color: #0000ff;">import</span> javax.servlet.http.*<span style="color: #000000;">;
</span><span style="color: #0000ff;">import</span> java.io.*<span style="color: #000000;">;

</span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span> JarDownload <span style="color: #0000ff;">extends</span><span style="color: #000000;"> HttpServlet {
    </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span> doGet(HttpServletRequest req, HttpServletResponse resp) <span style="color: #0000ff;">throws</span><span style="color: #000000;"> IOException, ServletException {
        resp.setContentType(</span>"application/jar"); <span style="color: #008000;">//</span><span style="color: #008000;"> 想让浏览器知道的事情</span>
<span style="color: #000000;">
        ServletContext ctx </span>=<span style="color: #000000;"> getServletContext();
        InputStream is </span>= ctx.getResourceAsStream("/hello.jar"<span style="color: #000000;">);

        </span><span style="color: #0000ff;">int</span> read = 0<span style="color: #000000;">;
        </span><span style="color: #0000ff;">byte</span>[] bytes = <span style="color: #0000ff;">new</span> <span style="color: #0000ff;">byte</span>[1024<span style="color: #000000;">];

        OutputStream os </span>=<span style="color: #000000;"> resp.getOutputStream();
        </span><span style="color: #0000ff;">while</span> ((read = is.read(bytes)) != -1<span style="color: #000000;">) {
            os.write(bytes, </span>0<span style="color: #000000;">, read);
        } </span><span style="color: #008000;">//</span><span style="color: #008000;"> 把JAR包先读到内存里再转写到输出流中。</span>
<span style="color: #000000;">        os.flush();
        os.close();
    }
}</span></pre>
</div>
<p>&nbsp;</p>
<p>6、最后，测试一下能否通过网页下载这个Jar包。</p>
<p><img src="http://images2015.cnblogs.com/blog/1042431/201705/1042431-20170531230345493-886624476.png" alt="" width="499" height="116" /></p>
<p>&nbsp;</p>
<p>7、经过检查，发现JarDownload.do的的确是hello.jar（只是名称不同罢了），但是文件名却是url-pattern，修改一下html和web.xml就可以了。</p>
<p><img src="http://images2015.cnblogs.com/blog/1042431/201705/1042431-20170531230924946-1378512138.png" alt="" width="293" height="93" /></p>
<p>这里体现了<a id="cb_post_title_url" href="http://www.cnblogs.com/xkxf/p/6848362.html">把逻辑名映射到servlet文件</a>的好处。</p>