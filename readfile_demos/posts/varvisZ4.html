<p>1、把Java放到HTML中，JSP应运而生。</p>
<p>&nbsp;</p>
<p>2、Servlet本身并没有main()方法，所以必须要有其他Java程序去调用它，这个Java程序就是Web容器（Container）。<strong>Tomcat就是一个容器。</strong></p>
<p>&nbsp;</p>
<p>3、容器能提供什么？</p>
<ul>
<li>通信支持 -不用再写ServerSocket了</li>
<li>生命周期管理 -容器控制着Servlet的生与死</li>
<li>多线程支持 -容器会自动地为它接收的每一个Servlet请求创建一个新的Java线程</li>
<li>声明方式实现安全&nbsp;</li>
<li>JSP支持 -容器负责把JSP代码翻译成Java</li>
</ul>
<p>&nbsp;</p>
<p><a name="a1"></a><span style="color: #3366ff;"><strong>4、容器如何处理请求？</strong></span></p>
<p>Ⅰ、用户发出一个指向Servlet的请求。</p>
<p>Ⅱ、容器&ldquo;看出&rdquo;这个请求指向Servlet，于是创建两个对象HttpServletRequest、HttpServletResponse。</p>
<p>Ⅲ、容器找到这个Servlet，为其创建或者分配一个线程，并传入上述两个对象。</p>
<p>Ⅳ、容器调用Servlet的<strong>service()</strong>方法。</p>
<div class="cnblogs_code">
<pre>    <span style="color: #0000ff;">protected</span> <span style="color: #0000ff;">void</span> service(<span style="color: #3366ff;"><strong>HttpServletRequest</strong></span> req, <strong><span style="color: #3366ff;">HttpServletResponse</span></strong> resp) <span style="color: #0000ff;">throws</span><span style="color: #000000;"> ServletException, IOException {
        String method </span>=<span style="color: #000000;"> req.getMethod();
        </span><span style="color: #0000ff;">long</span><span style="color: #000000;"> lastModified;
        </span><span style="color: #0000ff;">if</span>(method.equals("GET"<span style="color: #000000;">)) {
            lastModified </span>= <span style="color: #0000ff;">this</span><span style="color: #000000;">.getLastModified(req);
            </span><span style="color: #0000ff;">if</span>(lastModified == -1L<span style="color: #000000;">) {
                </span><span style="color: #0000ff;">this</span><span style="color: #000000;">.doGet(req, resp);
            } </span><span style="color: #0000ff;">else</span><span style="color: #000000;"> {
                </span><span style="color: #0000ff;">long</span><span style="color: #000000;"> ifModifiedSince;
                </span><span style="color: #0000ff;">try</span><span style="color: #000000;"> {
                    ifModifiedSince </span>= req.getDateHeader("If-Modified-Since"<span style="color: #000000;">);
                } </span><span style="color: #0000ff;">catch</span><span style="color: #000000;"> (IllegalArgumentException var9) {
                    ifModifiedSince </span>= -1L<span style="color: #000000;">;
                }

                </span><span style="color: #0000ff;">if</span>(ifModifiedSince &lt; lastModified / 1000L * 1000L<span style="color: #000000;">) {
                    </span><span style="color: #0000ff;">this</span><span style="color: #000000;">.maybeSetLastModified(resp, lastModified);
                    </span><span style="color: #0000ff;">this</span><span style="color: #000000;">.doGet(req, resp);
                } </span><span style="color: #0000ff;">else</span><span style="color: #000000;"> {
                    resp.setStatus(</span>304<span style="color: #000000;">);
                }
            }
        } </span><span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span>(method.equals("HEAD"<span style="color: #000000;">)) {
            lastModified </span>= <span style="color: #0000ff;">this</span><span style="color: #000000;">.getLastModified(req);
            </span><span style="color: #0000ff;">this</span><span style="color: #000000;">.maybeSetLastModified(resp, lastModified);
            </span><span style="color: #0000ff;">this</span><span style="color: #000000;">.doHead(req, resp);
        } </span><span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span>(method.equals("POST"<span style="color: #000000;">)) {
            </span><span style="color: #0000ff;">this</span><span style="color: #000000;">.doPost(req, resp);
        } </span><span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span>(method.equals("PUT"<span style="color: #000000;">)) {
            </span><span style="color: #0000ff;">this</span><span style="color: #000000;">.doPut(req, resp);
        } </span><span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span>(method.equals("DELETE"<span style="color: #000000;">)) {
            </span><span style="color: #0000ff;">this</span><span style="color: #000000;">.doDelete(req, resp);
        } </span><span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span>(method.equals("OPTIONS"<span style="color: #000000;">)) {
            </span><span style="color: #0000ff;">this</span><span style="color: #000000;">.doOptions(req, resp);
        } </span><span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span>(method.equals("TRACE"<span style="color: #000000;">)) {
            </span><span style="color: #0000ff;">this</span><span style="color: #000000;">.doTrace(req, resp);
        } </span><span style="color: #0000ff;">else</span><span style="color: #000000;"> {
            String errMsg </span>= lStrings.getString("http.method_not_implemented"<span style="color: #000000;">);
            Object[] errArgs </span>= <span style="color: #0000ff;">new</span><span style="color: #000000;"> Object[]{method};
            errMsg </span>=<span style="color: #000000;"> MessageFormat.format(errMsg, errArgs);
            resp.sendError(</span>501<span style="color: #000000;">, errMsg);
        }

    }</span></pre>
</div>
<p>Ⅵ、根据请求的不同，service()会调用不同的方法，假设请求对应doGet()方法：</p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff;">import</span> javax.servlet.http.*<span style="color: #000000;">;
</span><span style="color: #0000ff;">import</span> java.io.*<span style="color: #000000;">;
</span><span style="color: #0000ff;">import</span><span style="color: #000000;"> java.util.Date;

</span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span> Ch1Servlet <span style="color: #0000ff;">extends</span><span style="color: #000000;"> HttpServlet {
    @Override
    </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span> doGet(HttpServletRequest request, HttpServletResponse <span style="color: #3366ff;"><strong>response</strong></span>) <span style="color: #0000ff;">throws</span><span style="color: #000000;"> IOException {
        PrintWriter out </span>=<span style="color: #000000;"> response.getWriter();
        Date today </span>= <span style="color: #0000ff;">new</span><span style="color: #000000;"> Date();
        out.println(</span>"&lt;html&gt;" +
                "&lt;body&gt;" +
                "&lt;h1 align=center&gt;Hello Servlet&lt;/h1&gt;"
                + "&lt;/br&gt;" + today + "&lt;/body&gt;" + "&lt;/html&gt;"<span style="color: #000000;">
        );
    }
}</span></pre>
</div>
<p>Ⅶ、doGet()方法生成动态页面，并把它写入response里。</p>
<p>Ⅷ、线程结束，容器把response对象转换为一个HTTP响应，然后清理不再用的对象。</p>
<p>&nbsp;</p>
<p>5、容器是如何找到Servlet的?</p>
<div class="cnblogs_code">
<pre>    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">servlet</span><span style="color: #0000ff;">&gt;</span>
        <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">servlet-name</span><span style="color: #0000ff;">&gt;</span>Chapter1 Servlet<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">servlet-name</span><span style="color: #0000ff;">&gt;</span>
        <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">servlet-class</span><span style="color: #0000ff;">&gt;</span>Ch1Servlet<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">servlet-class</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">servlet</span><span style="color: #0000ff;">&gt;</span>

    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">servlet-mapping</span><span style="color: #0000ff;">&gt;</span>
        <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">servlet-name</span><span style="color: #0000ff;">&gt;</span>Chapter1 Servlet<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">servlet-name</span><span style="color: #0000ff;">&gt;</span>
        <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">url-pattern</span><span style="color: #0000ff;">&gt;</span>/hello<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">url-pattern</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">servlet-mapping</span><span style="color: #0000ff;">&gt;</span></pre>
</div>
<p>作为程序员，我们做且仅做的一件相关的事情就是编写web.xml（DD）。可以看到，一个servlet具有三个名字：文件路径名（相对于classes文件夹）；部署名（秘密的内部名，即servlet-name）；面向客户的URL名。为什么要建立这样的名字映射呢？主要是出于提高Web应用的灵活性和安全性。</p>
<p>&nbsp;</p>
<p>6、使用部署描述文件（DD，deployment descriptor）的优点。</p>
<p><img src="http://images2015.cnblogs.com/blog/1042431/201705/1042431-20170513090212722-824192755.png" alt="" width="349" height="92" /></p>
<p><img src="http://images2015.cnblogs.com/blog/1042431/201705/1042431-20170513090252019-1816637834.png" alt="" width="298" height="403" /></p>
<p>&nbsp;</p>